<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisar Alunos</title>
    <link rel="icon" type="image/x-icon" href="https://i.ibb.co/nLPy4WY/Imagem2.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css"> <!-- Arquivo CSS separado -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        /* Estilos adicionais para tornar a tabela responsiva em dispositivos móveis */
        @media (max-width: 768px) {
            .table-responsive {
                border: 0;
            }
            .table thead {
                display: none;
            }
            .table tbody, .table tr, .table td {
                display: block;
                width: 100%;
            }
            .table tr {
                margin-bottom: 15px;
            }
            .table td {
                text-align: right;
                padding-left: 50%;
                position: relative;
            }
            .table td::before {
                content: attr(data-label);
                position: absolute;
                left: 0;
                width: 50%;
                padding-left: 15px;
                font-weight: bold;
                text-align: left;
            }
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h2>Pesquisar Alunos</h2>
        <div class="form-group">
            <label for="search">Pesquisar Aluno:</label>
            <input type="text" class="form-control" id="search" placeholder="Digite parte do nome do aluno">
            <button class="btn btn-google-drive mt-2">Pesquisar</button>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered mt-3">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Curso</th>
                        <th>Data Início</th>
                        <th>Módulo</th>
                        <th>Exercícios</th>
                        <th>Trabalho</th>
                        <th>Seminário</th>
                        <th>Prova</th>
                        <th>Média</th>
                    </tr>
                </thead>
                <tbody id="resultTable">
                    <!-- Dados dos alunos serão inseridos aqui -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let alunosData = [];

            // Carregar dados do JSON ao carregar a página
            $.ajax({
                url: 'alunos.json',
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    alunosData = data;
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.error('Erro ao carregar dados:', textStatus, errorThrown);
                    alert('Erro ao carregar dados.');
                }
            });

            // Filtrar dados com base na entrada de pesquisa
            $('#search').on('input', function() {
                const searchValue = $(this).val().toLowerCase();
                const filteredData = alunosData.filter(aluno => aluno.nome.toLowerCase().includes(searchValue));
                loadTable(filteredData);
            });

            // Função para carregar os dados na tabela
            function loadTable(data) {
                const resultTable = $('#resultTable');
                resultTable.empty();
                data.forEach(aluno => {
                    aluno.modulos.forEach(mod => {
                        const row = `
                            <tr>
                                <td data-label="Nome">${aluno.nome}</td>
                                <td data-label="Curso">${aluno.curso}</td>
                                <td data-label="Data Início">${aluno.dataInicio}</td>
                                <td data-label="Módulo">${mod.modulo}</td>
                                <td data-label="Exercícios">${mod.exercicios}</td>
                                <td data-label="Trabalho">${mod.trabalho}</td>
                                <td data-label="Seminário">${mod.seminario}</td>
                                <td data-label="Prova">${mod.prova}</td>
                                <td data-label="Média">${mod.media}</td>
                            </tr>
                        `;
                        resultTable.append(row);
                    });
                });
            }
        });
    </script>
</body>
</html>
